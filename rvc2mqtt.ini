[General]
debug = 0                       ; Debug level, 0=none, 1=errors, 2=errors+warnings, 3=errors+warnings+info
parameterized_strings = 0       ; Send parameterized strings to mqtt 
screenout = 0                   ; Output level, 0=none, 1= Dump parsed messages
specfile = rvc-spec.yml         ; Specification file

[MQTT]
mqttBroker = 192.168.50.77  ; MQTT broker IP address
mqttOut = 2                 ; Send to MQTT, 0 = off, 1=Publish, 2=Retain
mqttUser = hassio           ; MQTT username
mqttPass = hassio           ; MQTT password
mqttOutputTopic = RVC2      ; MQTT topic to publish to

[CAN]
CANport = 192.168.50.103:3333

[HomeAssistant]
discovery_enabled = 1                        ; Enable HA MQTT Discovery (0=disabled, 1=enabled)
discovery_prefix = homeassistant             ; HA discovery prefix (usually 'homeassistant')
mapping_file = mappings/tiffin_default.yaml  ; Entity mapping configuration file
legacy_topics = 1                            ; Keep publishing old RVC2/* topics (0=no, 1=yes)

; ============================================================================
; Phase 2: Bidirectional Control Configuration
; ============================================================================

[Commands]
enabled = 1                     ; Enable bidirectional commands (0=disabled, 1=enabled)
source_address = 99             ; CAN source address for commands (default: 99)
retry_count = 3                 ; Number of retries for failed CAN transmissions
retry_delay_ms = 100            ; Delay between retries in milliseconds

[RateLimiting]
enabled = 1                             ; Enable rate limiting (0=disabled, 1=enabled)
global_commands_per_second = 10         ; Max commands per second (global)
entity_commands_per_second = 2          ; Max commands per second per entity
entity_cooldown_ms = 500                ; Minimum delay between commands to same entity (ms)

[Security]
enabled = 1                             ; Enable security controls (0=disabled, 1=enabled)
allowlist =                             ; Comma-separated list of allowed entity_ids (empty = all allowed)
denylist =                              ; Comma-separated list of denied entity_ids (empty = none denied)
allowed_commands = light,climate,switch ; Allowed command types (comma-separated)

[Audit]
enabled = 1                             ; Enable audit logging (0=disabled, 1=enabled)
log_file = logs/command_audit.log       ; Audit log file path
log_level = INFO                        ; Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
json_format = 1                         ; Use JSON format (1) or human-readable (0)
max_bytes = 10485760                    ; Max log file size before rotation (10 MB)
backup_count = 5                        ; Number of backup files to keep